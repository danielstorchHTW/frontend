(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[843],{4964:(e,t,n)=>{var r=n(5112),a=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(r){}}return!1}},7850:(e,t,n)=>{var r=n(111),a=n(4326),i=n(5112),u=i("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[u])?!!t:"RegExp"==a(e))}},3929:(e,t,n)=>{var r=n(7850),a=TypeError;e.exports=function(e){if(r(e))throw a("The method doesn't accept regular expressions");return e}},6091:(e,t,n)=>{var r=n(6530).PROPER,a=n(7293),i=n(1361),u="​᠎";e.exports=function(e){return a((function(){return!!i[e]()||u[e]()!==u||r&&i[e].name!==e}))}},6699:(e,t,n)=>{"use strict";var r=n(2109),a=n(1318).includes,i=n(7293),u=n(1223),s=i((function(){return!Array(1).includes()}));r({target:"Array",proto:!0,forced:s},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),u("includes")},2023:(e,t,n)=>{"use strict";var r=n(2109),a=n(1702),i=n(3929),u=n(4488),s=n(1340),o=n(4964),l=a("".indexOf);r({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~l(s(u(this)),s(i(e)),arguments.length>1?arguments[1]:void 0)}})},3210:(e,t,n)=>{"use strict";var r=n(2109),a=n(3111).trim,i=n(6091);r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return a(this)}})},8843:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});n(8309);var r=n(6252),a=n(3577),i=n(9963),u={class:"container"},s=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"Student ID"),(0,r._)("th",null,"Name"),(0,r._)("th",null,"Matrikelnummer"),(0,r._)("th")])],-1),o={key:0},l=(0,r._)("td",{colspan:"2"},"No students yet",-1),c=[l],d={class:"btn"},p=["onClick"],f={key:0,class:"popup show"};function h(e,t,n,l,h,m){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",{class:(0,a.C_)(["app-container",{"dark-mode":e.darkMode}]),id:"app"},[(0,r._)("div",u,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return h.nameField=e}),placeholder:"Name",onKeyup:t[1]||(t[1]=(0,i.D2)((function(e){return m.save()}),["enter"]))},null,544),[[i.nr,h.nameField]]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return h.matrikelnrField=e}),placeholder:"Matrikelnummer",onKeyup:t[3]||(t[3]=(0,i.D2)((function(e){return m.save()}),["enter"]))},null,544),[[i.nr,h.matrikelnrField]]),(0,r._)("button",{type:"button",class:"styled-button",onClick:t[4]||(t[4]=function(e){return m.save()})},"Save"),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return h.filterCrit=e}),placeholder:"filter criterion"},null,512),[[i.nr,h.filterCrit]])]),(0,r._)("div",null,[(0,r._)("table",null,[s,(0,r._)("tbody",null,[0===h.students.length?((0,r.wg)(),(0,r.iD)("tr",o,c)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(m.myFilterFunc(h.filterCrit),(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,(0,a.zw)(e.id),1),(0,r._)("td",null,(0,a.zw)(e.name),1),(0,r._)("td",null,(0,a.zw)(e.matrikelnr),1),(0,r._)("td",null,[(0,r._)("button",d,[(0,r._)("i",{class:"fa fa-trash",onClick:function(t){return m.deleteStudent(e.id)}},null,8,p)])])])})),128)),(0,r._)("tr",null,[(0,r._)("td",null,(0,a.zw)(h.idField),1),(0,r._)("td",null,(0,a.zw)(h.nameField),1),(0,r._)("td",null,(0,a.zw)(h.matrikelnrField),1)])])])])],2),""!==h.savingError?((0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("p",null,(0,a.zw)(h.savingError),1)])):(0,r.kq)("",!0)],64)}var m=n(6835),v=n(8534),w=(n(7327),n(1539),n(6699),n(2023),n(2564),n(3210),n(8862),n(2222),n(9554),n(4747),n(1058),n(2707),"https://webtech-projekt.up.railway.app"),k=w+"/students";const g={name:"DynamicForm",data:function(){return{students:[],idField:"",nameField:"",matrikelnrField:"",claims:"",accessToken:"",filterCrit:"",savingError:""}},methods:{myFilterFunc:function(e){return this.students.filter((function(t){return e.length<1||t.name.toLowerCase().includes(e.toLowerCase())}))},resetFields:function(){this.nameField="",this.matrikelnrField=""},showPopup:function(e){var t=this;this.savingError=e,setTimeout((function(){t.savingError=""}),2e3)},save:function(){var e=this;return(0,v.Z)((0,m.Z)().mark((function t(){var n,r;return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n={name:e.nameField,matrikelnr:e.matrikelnrField},""!==e.matrikelnrField.trim()&&""!==e.nameField.trim()){t.next=4;break}return e.showPopup("Saving failed. Both fields must be filled."),t.abrupt("return");case 4:if(!isNaN(e.matrikelnrField)){t.next=7;break}return e.showPopup("Saving failed. Invalid datatype."),t.abrupt("return");case 7:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},t.prev=8,t.next=11,e.performDatabaseOperation(k,r);case 11:return e.resetFields(),t.next=14,e.loadStudents();case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](8),console.log("Error:",t.t0),e.showPopup("Saving failed. An error occurred.");case 20:case"end":return t.stop()}}),t,null,[[8,16]])})))()},deleteStudent:function(e){var t=this;return(0,v.Z)((0,m.Z)().mark((function n(){var r,a,i,u;return(0,m.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={method:"DELETE",headers:{"Content-Type":"application/json"}},n.prev=1,a="".concat(k,"/delete/").concat(e),n.next=5,t.performDatabaseOperation(a,r);case 5:if(i=n.sent,200!==i.status){n.next=20;break}return n.next=9,i.json();case 9:if(u=n.sent,!u.success){n.next=16;break}return console.log("es geht"),n.next=14,t.loadStudents();case 14:n.next=18;break;case 16:console.log("Delete operation failed:",u.message),t.showPopup("Delete failed. Student is tied to a grade.");case 18:n.next=22;break;case 20:console.log("Delete operation failed with status:",i.status),t.showPopup("Delete failed. Student is tied to a grade.");case 22:n.next=29;break;case 24:return n.prev=24,n.t0=n["catch"](1),console.log("Error:",n.t0.message),n.next=29,t.loadStudents();case 29:case"end":return n.stop()}}),n,null,[[1,24]])})))()},performDatabaseOperation:function(e,t){return(0,v.Z)((0,m.Z)().mark((function n(){return(0,m.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){fetch(e,t).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),n(e)}))["catch"]((function(e){console.log("Error:",e),r(e)}))})));case 1:case"end":return n.stop()}}),n)})))()},loadStudents:function(){var e=this;return(0,v.Z)((0,m.Z)().mark((function t(){var n;return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(k);case 3:return n=t.sent,t.next=6,n.json();case 6:e.students=t.sent,e.students.forEach((function(e){e.id=parseInt(e.id)})),e.students.sort((function(e,t){return e.id-t.id})),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log("Error:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},setup:function(){var e=this;return(0,v.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$root.authenticated){t.next=4;break}return t.next=3,e.$auth.getUser();case 3:e.claims=t.sent;case 4:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return(0,v.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.setup();case 2:return t.next=4,e.loadStudents();case 4:case"end":return t.stop()}}),t)})))()},updated:function(){console.log("UPDATED!")}};var x=n(3744);const b=(0,x.Z)(g,[["render",h]]),_=b}}]);
//# sourceMappingURL=843.9ede2046.js.map