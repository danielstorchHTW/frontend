(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[673],{4964:(e,t,r)=>{var n=r(5112),o=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[o]=!1,"/./"[e](t)}catch(n){}}return!1}},7850:(e,t,r)=>{var n=r(111),o=r(4326),s=r(5112),a=s("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},3929:(e,t,r)=>{var n=r(7850),o=TypeError;e.exports=function(e){if(n(e))throw o("The method doesn't accept regular expressions");return e}},6091:(e,t,r)=>{var n=r(6530).PROPER,o=r(7293),s=r(1361),a="​᠎";e.exports=function(e){return o((function(){return!!s[e]()||a[e]()!==a||n&&s[e].name!==e}))}},6699:(e,t,r)=>{"use strict";var n=r(2109),o=r(1318).includes,s=r(7293),a=r(1223),u=s((function(){return!Array(1).includes()}));n({target:"Array",proto:!0,forced:u},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},2023:(e,t,r)=>{"use strict";var n=r(2109),o=r(1702),s=r(3929),a=r(4488),u=r(1340),i=r(4964),c=o("".indexOf);n({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~c(u(a(this)),u(s(e)),arguments.length>1?arguments[1]:void 0)}})},3210:(e,t,r)=>{"use strict";var n=r(2109),o=r(3111).trim,s=r(6091);n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return o(this)}})},5673:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});r(8309);var n=r(6252),o=r(9963),s=r(3577),a={class:"container"},u=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Course ID"),(0,n._)("th",null,"Name"),(0,n._)("th")])],-1),i={key:0},c=(0,n._)("td",{colspan:"2"},"No courses yet",-1),l=[c],d={class:"btn"},p=["onClick"],f=(0,n._)("td",null,null,-1),h={key:0,class:"popup show"};function v(e,t,r,c,v,m){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",a,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return v.nameField=e}),placeholder:"Name",onKeyup:t[1]||(t[1]=(0,o.D2)((function(e){return m.save()}),["enter"]))},null,544),[[o.nr,v.nameField]]),(0,n._)("button",{type:"button",class:"styled-button",onClick:t[2]||(t[2]=function(e){return m.save()})},"Save"),(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return v.filterCrit=e}),placeholder:"filter criterion"},null,512),[[o.nr,v.filterCrit]])]),(0,n._)("div",null,[(0,n._)("table",null,[u,(0,n._)("tbody",null,[0===v.courses.length?((0,n.wg)(),(0,n.iD)("tr",i,l)):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(m.myFilterFunc(v.filterCrit),(function(e){return(0,n.wg)(),(0,n.iD)("tr",{key:e.id},[(0,n._)("td",null,(0,s.zw)(e.id),1),(0,n._)("td",null,(0,s.zw)(e.name),1),(0,n._)("td",null,[(0,n._)("button",d,[(0,n._)("i",{class:"fa fa-trash",onClick:function(t){return m.deleteCourse(e.id)}},null,8,p)])])])})),128)),(0,n._)("tr",null,[(0,n._)("td",null,(0,s.zw)(v.idField),1),(0,n._)("td",null,(0,s.zw)(v.nameField),1),f])])])]),""!==v.savingError?((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("p",null,(0,s.zw)(v.savingError),1)])):(0,n.kq)("",!0)],64)}var m=r(6835),w=r(8534),g=(r(7327),r(1539),r(6699),r(2023),r(2564),r(3210),r(8862),r(2222),r(9554),r(4747),r(1058),r(2707),"https://webtech-projekt.up.railway.app"),x=g+"/course";const k={name:"DynamicForm",data:function(){return{courses:[],idField:"",nameField:"",claims:"",accessToken:"",filterCrit:"",savingError:""}},methods:{myFilterFunc:function(e){return this.courses.filter((function(t){return e.length<1||t.name.toLowerCase().includes(e.toLowerCase())}))},resetFields:function(){this.nameField=""},showPopup:function(e){var t=this;this.savingError=e,setTimeout((function(){t.savingError=""}),2e3)},save:function(){var e=this;return(0,w.Z)((0,m.Z)().mark((function t(){var r,n;return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={name:e.nameField},""!==e.nameField.trim()){t.next=4;break}return e.showPopup("Saving failed. Field must be filled."),t.abrupt("return");case 4:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},t.prev=5,t.next=8,e.performDatabaseOperation(x,n);case 8:return e.resetFields(),t.next=11,e.loadCourses();case 11:t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](5),console.log("Error:",t.t0),e.showPopup("Saving failed. An error occurred.");case 17:case"end":return t.stop()}}),t,null,[[5,13]])})))()},deleteCourse:function(e){var t=this;return(0,w.Z)((0,m.Z)().mark((function r(){var n,o,s,a;return(0,m.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={method:"DELETE",headers:{"Content-Type":"application/json"}},r.prev=1,o="".concat(x,"/delete/").concat(e),r.next=5,t.performDatabaseOperation(o,n);case 5:if(s=r.sent,200!==s.status){r.next=19;break}return r.next=9,s.json();case 9:if(a=r.sent,!a.success){r.next=15;break}return r.next=13,t.loadCourses();case 13:r.next=17;break;case 15:console.log("Delete operation failed:",a.message),t.showPopup("Delete failed. Course is tied to a grade.");case 17:r.next=21;break;case 19:console.log("Delete operation failed with status:",s.status),t.showPopup("Delete failed. Course is tied to a grade.");case 21:r.next=28;break;case 23:return r.prev=23,r.t0=r["catch"](1),console.log("Error:",r.t0.message),r.next=28,t.loadCourses();case 28:case"end":return r.stop()}}),r,null,[[1,23]])})))()},performDatabaseOperation:function(e,t){return(0,w.Z)((0,m.Z)().mark((function r(){return(0,m.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){fetch(e,t).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),r(e)}))["catch"]((function(e){console.log("Error:",e),n(e)}))})));case 1:case"end":return r.stop()}}),r)})))()},loadCourses:function(){var e=this;return(0,w.Z)((0,m.Z)().mark((function t(){var r;return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(x);case 3:return r=t.sent,t.next=6,r.json();case 6:e.courses=t.sent,e.courses.forEach((function(e){e.id=parseInt(e.id)})),e.courses.sort((function(e,t){return e.id-t.id})),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log("Error:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},setup:function(){var e=this;return(0,w.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$root.authenticated){t.next=4;break}return t.next=3,e.$auth.getUser();case 3:e.claims=t.sent;case 4:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return(0,w.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.setup();case 2:return t.next=4,e.loadCourses();case 4:case"end":return t.stop()}}),t)})))()},updated:function(){console.log("UPDATED!")}};var b=r(3744);const y=(0,b.Z)(k,[["render",v]]),C=y}}]);
//# sourceMappingURL=673.78476a8a.js.map