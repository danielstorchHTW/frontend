"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[825],{9826:(e,t,n)=>{var r=n(2109),u=n(2092).find,s=n(1223),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(e){return u(this,e,arguments.length>1?arguments[1]:void 0)}}),s(i)},6825:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});n(8309);var r=n(6252),u=n(9963),s=n(3577),i={class:"container"},o={class:"table-container"},a={class:"showGrades"},d=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"Student ID"),(0,r._)("th",null,"Kurs ID"),(0,r._)("th",null,"Note"),(0,r._)("th")])],-1),l={key:0},c=(0,r._)("td",{colspan:"4"},"No courses yet",-1),f=[c],p=["onClick"],h=(0,r._)("i",{class:"fa fa-trash"},null,-1),_=[h],w=(0,r._)("td",null,null,-1),v={class:"showCourses"},g=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"Course ID"),(0,r._)("th",null,"Name")])],-1),k={key:0},m=(0,r._)("td",{colspan:"2"},"No courses yet",-1),y=[m],x={class:"showStudents"},b=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"Student ID"),(0,r._)("th",null,"Name"),(0,r._)("th",null,"Matrikelnummer")])],-1),F={key:0},D=(0,r._)("td",{colspan:"3"},"No students yet",-1),Z=[D],C={key:0,class:"popup show"};function S(e,t,n,c,h,m){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",i,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return h.student_idField=e}),placeholder:"Student ID",onKeyup:t[1]||(t[1]=(0,u.D2)((function(e){return m.save()}),["enter"]))},null,544),[[u.nr,h.student_idField]]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return h.course_idField=e}),placeholder:"Kurs ID",onKeyup:t[3]||(t[3]=(0,u.D2)((function(e){return m.save()}),["enter"]))},null,544),[[u.nr,h.course_idField]]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return h.gradeField=e}),placeholder:"Note",onKeyup:t[5]||(t[5]=(0,u.D2)((function(e){return m.save()}),["enter"]))},null,544),[[u.nr,h.gradeField]]),(0,r._)("button",{type:"button",class:"styled-button",onClick:t[6]||(t[6]=function(e){return m.save()})},"Save"),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[7]||(t[7]=function(e){return h.filterCritStudent=e}),placeholder:"filter Students"},null,512),[[u.nr,h.filterCritStudent]]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[8]||(t[8]=function(e){return h.filterCritCourse=e}),placeholder:"filter Courses"},null,512),[[u.nr,h.filterCritCourse]])]),(0,r._)("div",o,[(0,r._)("table",a,[d,(0,r._)("tbody",null,[0===h.studentGrades.length?((0,r.wg)(),(0,r.iD)("tr",l,f)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(m.myFilterFunc(h.filterCritStudent,h.filterCritCourse),(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,(0,s.zw)(e.student_id.id),1),(0,r._)("td",null,(0,s.zw)(e.course_id.id),1),(0,r._)("td",null,(0,s.zw)(e.grade),1),(0,r._)("td",null,[(0,r._)("button",{class:"btn",onClick:function(t){return m.deleteGrade(e.student_id.id,e.course_id.id)}},_,8,p)])])})),128)),(0,r._)("tr",null,[(0,r._)("td",null,(0,s.zw)(h.student_idField),1),(0,r._)("td",null,(0,s.zw)(h.course_idField),1),(0,r._)("td",null,(0,s.zw)(h.gradeField),1),w])])]),(0,r._)("table",v,[g,(0,r._)("tbody",null,[0===h.courses.length?((0,r.wg)(),(0,r.iD)("tr",k,y)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.courses,(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,(0,s.zw)(e.id),1),(0,r._)("td",null,(0,s.zw)(e.name),1)])})),128))])]),(0,r._)("table",x,[b,(0,r._)("tbody",null,[0===h.students.length?((0,r.wg)(),(0,r.iD)("tr",F,Z)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.students,(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,(0,s.zw)(e.id),1),(0,r._)("td",null,(0,s.zw)(e.name),1),(0,r._)("td",null,(0,s.zw)(e.matrikelnr),1)])})),128))])])]),""!==h.savingError?((0,r.wg)(),(0,r.iD)("div",C,[(0,r._)("p",null,(0,s.zw)(h.savingError),1)])):(0,r.kq)("",!0)],64)}var E=n(6835),z=n(8534),G=(n(7327),n(1539),n(9554),n(4747),n(1058),n(2707),n(2564),n(9826),n(8862),n(2222),"https://webtech-projekt.up.railway.app"),N=G+"/grades";const I={name:"DynamicForm",data:function(){return{studentGrades:[],students:[],courses:[],idField:"",student_idField:"",course_idField:"",gradeField:"",claims:"",accessToken:"",filterCritStudent:"",filterCritCourse:"",savingError:""}},methods:{myFilterFunc:function(e,t){return this.studentGrades.filter((function(n){return(e.length<1||n.student_id.id==e)&&(t.length<1||n.course_id.id==t)}))},loadStudents:function(){var e=this;return(0,z.Z)((0,E.Z)().mark((function t(){var n;return(0,E.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(G+"/students");case 3:return n=t.sent,t.next=6,n.json();case 6:e.students=t.sent,e.students.forEach((function(e){e.id=parseInt(e.id)})),e.students.sort((function(e,t){return e.id-t.id})),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log("Error:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},loadCourses:function(){var e=this;return(0,z.Z)((0,E.Z)().mark((function t(){var n;return(0,E.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(G+"/course");case 3:return n=t.sent,t.next=6,n.json();case 6:e.courses=t.sent,e.courses.forEach((function(e){e.id=parseInt(e.id)})),e.courses.sort((function(e,t){return e.id-t.id})),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log("Error:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},loadGrades:function(){var e=this;return(0,z.Z)((0,E.Z)().mark((function t(){var n;return(0,E.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(N);case 3:return n=t.sent,t.next=6,n.json();case 6:e.studentGrades=t.sent,e.studentGrades.sort((function(e,t){return e.student_id.id!==t.student_id.id?e.student_id.id-t.student_id.id:e.course_id.id-t.course_id.id})),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log("Error:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},resetFields:function(){this.student_idField="",this.course_idField="",this.gradeField=""},showPopup:function(e){var t=this;this.savingError=e,setTimeout((function(){t.savingError=""}),2e3)},save:function(){var e=this;return(0,z.Z)((0,E.Z)().mark((function t(){var n,r,u,s;return(0,E.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.students.find((function(t){return t.id==e.student_idField})),r=e.courses.find((function(t){return t.id==e.course_idField})),!isNaN(e.gradeField)&&""!==e.gradeField){t.next=5;break}return e.showPopup("Saving failed. Invalid datatype."),t.abrupt("return");case 5:if(void 0!==n&&void 0!==r){t.next=9;break}return console.log("Student or course not found"),e.showPopup("Saving failed. Student or course not found."),t.abrupt("return");case 9:return u={student_id:n,course_id:r,grade:e.gradeField},s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)},t.prev=11,t.next=14,e.performDatabaseOperation(N,s);case 14:return e.resetFields(),t.next=17,e.loadGrades();case 17:t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](11),console.log("Error:",t.t0),e.showPopup("Saving failed. An error occurred.");case 23:case"end":return t.stop()}}),t,null,[[11,19]])})))()},deleteGrade:function(e,t){var n=this;return(0,z.Z)((0,E.Z)().mark((function r(){var u,s;return(0,E.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return u={method:"DELETE",headers:{"Content-Type":"application/json"}},r.prev=1,s="".concat(N,"/delete/").concat(e,"/").concat(t),r.next=5,n.performDatabaseOperation(s,u);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),console.log("Error:",r.t0);case 10:return r.next=12,n.loadGrades();case 12:case"end":return r.stop()}}),r,null,[[1,7]])})))()},performDatabaseOperation:function(e,t){return(0,z.Z)((0,E.Z)().mark((function n(){return(0,E.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){fetch(e,t).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),n(e)}))["catch"]((function(e){console.log("Error:",e),r(e)}))})));case 1:case"end":return n.stop()}}),n)})))()},setup:function(){var e=this;return(0,z.Z)((0,E.Z)().mark((function t(){return(0,E.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$root.authenticated){t.next=4;break}return t.next=3,e.$auth.getUser();case 3:e.claims=t.sent;case 4:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return(0,z.Z)((0,E.Z)().mark((function t(){return(0,E.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.setup();case 2:return t.next=4,e.loadGrades();case 4:return t.next=6,e.loadStudents();case 6:return t.next=8,e.loadCourses();case 8:case"end":return t.stop()}}),t)})))()},updated:function(){console.log("UPDATED!")}};var K=n(3744);const j=(0,K.Z)(I,[["render",S]]),P=j}}]);
//# sourceMappingURL=825.92ce8385.js.map